# üè¢ NebusTz API

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **üèóÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–¥–∞–Ω–∏—è–º–∏** - —Ä–∞–±–æ—Ç–∞ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ —Å –≥–µ–æ–ª–æ–∫–∞—Ü–∏–µ–π
- **üìã –í–∏–¥—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∏–¥–æ–≤ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **üìç –ì–µ–æ–ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –∏ –∑–¥–∞–Ω–∏–π –ø–æ —Ä–∞–¥–∏—É—Å—É
- **üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - API –∫–ª—é—á –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **üìö Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ —Å Pest
- **üöÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–µ–∫** - Laravel 10, PHP 8.3, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Laravel 10

- **Models**: Organization, Building, Activity, User
- **Controllers**: RESTful –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- **Services**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
- **Resources**: API —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
- **Middleware**: –ö–∞—Å—Ç–æ–º–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ API –∫–ª—é—á
- **Testing**: Feature –∏ Unit —Ç–µ—Å—Ç—ã —Å Pest

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.3+
- Laravel 10
- Composer
- PostgreSQL

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repository-url>
cd nebusTz/api
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
composer install
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
```bash
cp .env.example .env
php artisan key:generate
```

5. **–ó–∞–ø—É—Å–∫ docker**
```bash
–í –∫–æ—Ä–Ω–µ nebuzTz
docker-compose up
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**
```bash
php artisan migrate
php artisan db:seed
```

## üìö API Endpoints

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
–í—Å–µ API endpoints –∑–∞—â–∏—â–µ–Ω—ã —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º API –∫–ª—é—á–æ–º —á–µ—Ä–µ–∑ middleware `ApiStaticKey` - fa30-k4v9-5316-kEQ.
–ú–æ–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –≤ .env

### üè¢ –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/api/organization/{id}` | –ü–æ–ª—É—á–∏—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –ø–æ ID |
| `GET` | `/api/organization/search/name` | –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é |
| `GET` | `/api/organization/radius` | –ü–æ–∏—Å–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ |
| `GET` | `/api/organization/buildings/{id}/organizations` | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ –∑–¥–∞–Ω–∏–∏ |
| `GET` | `/api/organization/activity/{id}/organizations` | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –≤–∏–¥—É –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |
| `GET` | `/api/organization/activity/{id}/organizations-with-children` | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ –≤–∏–¥–∞–º–∏ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |

### üèóÔ∏è –ó–¥–∞–Ω–∏—è

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/api/buildings` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–¥–∞–Ω–∏–π |
| `GET` | `/api/buildings/{id}` | –ü–æ–ª—É—á–∏—Ç—å –∑–¥–∞–Ω–∏–µ –ø–æ ID |
| `GET` | `/api/buildings/radius` | –ü–æ–∏—Å–∫ –∑–¥–∞–Ω–∏–π –≤ —Ä–∞–¥–∏—É—Å–µ |

### üìã –í–∏–¥—ã –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| –ú–µ—Ç–æ–¥ | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|----------|----------|
| `GET` | `/api/activity` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–∏–¥–æ–≤ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |
| `GET` | `/api/activity/{id}` | –ü–æ–ª—É—á–∏—Ç—å –≤–∏–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ ID |

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### Organizations
- `id` - UUID –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `phone` - –¢–µ–ª–µ—Ñ–æ–Ω
- `building_id` - –°–≤—è–∑—å —Å –∑–¥–∞–Ω–∏–µ–º
- `activity_id` - –°–≤—è–∑—å —Å –≤–∏–¥–æ–º –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `slug` - URL-friendly –Ω–∞–∑–≤–∞–Ω–∏–µ

### Buildings
- `id` - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `address` - –ê–¥—Ä–µ—Å –∑–¥–∞–Ω–∏—è
- `latitude` - –®–∏—Ä–æ—Ç–∞
- `longitude` - –î–æ–ª–≥–æ—Ç–∞

### Activities
- `id` - –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–∞ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `parent_id` - –†–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π –≤–∏–¥ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- `level` - –£—Ä–æ–≤–µ–Ω—å –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Pest –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
composer test:unit
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è:

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
php artisan l5-swagger:generate
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:92/api/documentation`

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### Code Style
–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Laravel Pint –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞:

```bash
composer lint
```

### –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Rector –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

```bash
composer rector
```

## üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ
- **Laravel 10** - PHP —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Laravel Sanctum** - API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **L5-Swagger** - Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **Spatie Laravel Data** - Data Transfer Objects
- **Spatie Laravel Sluggable** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ slug'–∏

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **Pest** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Laravel Pint** - Code style
- **Rector** - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥
- **Laravel Dusk** - Browser —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü—Ä–æ–µ–∫—Ç**: NebusTz API

